2006-03-17    <mschimek@users.sf.net>

	* test/hamm.c (main): Signedness fix.
	* test/raw_decoder.c: Added vbi_sampling_par.synchronous tests.
	* test/sim.c, test/osc.c, test/capture.c: Added --sim --desync
	  option to test vbi_sampling_par.synchronous with a one field delay.
	* src/raw_decoder.h (_vbi_service_par_flag, _vbi_service_par),
	* src/raw_decoder.c (_vbi_service_table): Added
	  _VBI_SP_FIELD_NUM, _VBI_SP_LINE_NUM flags to eliminate services
	  which need raw VBI with known field or line numbers.
	* src/raw_decoder.c (decode_pattern, _vbi_sampling_par_check_service)
	(vbi3_raw_decoder_add_services): Handle raw VBI with unknown field
	  order (V4L VBI_UNSYNC, V4L2_VBI_UNSYNC flag).
	* src/io-sim.c (signal_u8): Removed vbi_sampling_par.synchronous
	  check so we can test with this flag cleared.

	* configure.in: Bumped version number to 0.2.20.

2006-02-23    <mschimek@users.sf.net>

	* Release 0.2.19.

2006-02-23    <mschimek@users.sf.net>

	* contrib/ntsc-cc.c: Did not use libzvbi but its own decoder,
	  fixes Debian bug #354035.
	* contrib/Makefile.am (zvbi_ntsc_cc_LDADD): Link libzvbi
	  dynamically.

2005-02-11    <mschimek@users.sf.net>

	* Release 0.2.18.

2006-02-07    <mschimek@users.sf.net>

	* test/ttxfilter.c: Didn't work with parallel page transmission.
	* src/cache.c, src/cache.h: Replaced list type to prevent a
	  pointer aliasing bug.
	* src, contrib, daemon, test: Cleaned up to avoid unused parameter,
	  signedness and constness warnings, replaced printf format modifier
	  ll? by PRI?64. Patch #1425503 by Diego Petten√≤.
	* configure.in: Modernized and made documentation building optional
	  (patch #1425497 by Diego Petten√≤).

2005-10-24    <mschimek@users.sf.net>

	* configure.in: Added AM_MAINTAINER_MODE.
	* m4/autogen.sh (conf_flags): Don't default to maintainer mode.
	* src/Makefile.am: BUILT_SOURCES do not belong into CLEANFILES.
	  Rebuild BUILT_SOURCES only in maintainer mode, just in case.

2005-10-07    <mschimek@users.sf.net>

	* Release 0.2.17.

2005-10-07    <mschimek@users.sf.net>

	* src/Makefile.am: Build network-table.h from online networks.xml.
	* src/tables.c: vbi_cni_table[] now in network-table.h (generated).

2005-10-04    <mschimek@users.sf.net>

	* src/io-v4l.c (open_video_dev): readdir_r() fix.

2005-10-03    <mschimek@users.sf.net>

	* configure.in: Bumped version number to 0.2.17, .so revision to 8.
	* contrib/README: Added info about ntsc-cc.
	* contrib/Makefile.am (bin_PROGRAMS): Added zvbi-ntsc-cc.
	  (AM_CPPFLAGS): Added X_CFLAGS for ntsc-cc.
	  (LDADD): Added X_LIBS for ntsc-cc.
	  (man_MANS): Added zvbi-ntsc-cc.1.
	* contrib: Imported ntsc-cc.c and ntsc-cc.1 from Xawtv CVS.
	* test/Makefile.am (noinst_PROGRAMS): Added ttxfilter.
	(ttxfilter_SOURCES): Added.
	* test/sliced.c, test/sliced.h: New write interface for
	  ttxfilter.
	* test: Added ttxfilter.c.
	* src/xds_demux.h: Doxumentation update.

2005-07-10    <mschimek@users.sf.net>

	* src/xds_demux.h, src/xds_demux.c (_vbi_xds_packet_dump):
	  Added missing XDS packet subclasses.

2005-06-30    <mschimek@users.sf.net>

	* src/structpr.pl: Didn't log VIDIOC_G|S_STD.

2005-06-10    <mschimek@users.sf.net>

	* src/dvb_mux.c (_vbi_dvb_multiplex_sliced): Didn't write the
	  correct data_unit_length in compatibility mode (data_identifier
	  in range 0x10 ... 0x1F), breaking test/capture --pes output.
	* src/dvb_demux.c: Added more log points.
	* src/misc.h (__builtin_expect, likely, unlikely), 
	  src/dvb_demux.c (demux_packet), src/bit_slicer.c (BIT_SLICER):
	  Replaced __builtin_expect() by more readable likely()/unlikely()
	  macros.  Thanks to Linux hackers for the idea.
	* src/dvb_mux.h, src/dvb_mux.c:
	(_vbi_dvb_mux_mux): Renamed to _vbi_dvb_mux_feed for consistency.
	* test/README: Added sliced2pes and updated test/capture options.
	* test/Makefile.am (noinst_PROGRAMS): Added sliced2pes.
	(caption_SOURCES, capture_SOURCES, decode_SOURCES, export_SOURCES):
	  Added sliced.c and sliced.h which now contain the code to read
	  old test/capture --sliced output.
	* test/caption.c: Cleaned up and added support for DVB PES
	  input (PAL/SECAM caption).
	* test/sliced2pes.c: Added to convert old test/capture --sliced
	  output to DVB PES format.
	* test/decode.c (main): Option -a didn't toggle all decode options
	  as it should and didn't enable/disable XDS.
	* test/decode.c, test/export.c, test/caption.c, test/sliced.c,
	  test/sliced.h:
	  Moved the code reading old test/capture --sliced output into
	  the new files sliced.c/h.

2005-05-25    <mschimek@users.sf.net>

	* Release 0.2.16.

2005-05-25    <mschimek@users.sf.net>

	* doc/Doxyfile.in (FILE_PATTERNS): Added xds_demux.h.
	* test/decode.c: Added xds_demux test code.
	* src/caption.c: Moved the XDS debugging code to xds_demux.c.
	* src/Makefile.am (libzvbi_la_SOURCES): Added xds_demux.c/.h.
	(LIBZVBI_HDRS): Added xds_demux.h.
	* src/xds_demux.c, src/xds_demux.h: New XDS demultiplexer from
	  branch 0.3.
	* src/io-v4l2k.c: Added a work-around for wrong NTSC line numbers
	  reported by saa7134 drivers before 0.2.13.
	* src/exp-html.c (export): segv fix by Bernhard Rosenkraenzer.

2005-05-11    <mschimek@users.sf.net>

	* test/wss.c: -d takes an argument. Crashed due to NULL string pointer.
	* test/osc.c, test/capture.c:
	(short_options): -d takes an argument, not -e.
	  Crashed due to NULL string pointer.

2005-05-07    <mschimek@users.sf.net>

	* src/io.c (vbi_capture_io_update_timeout): Replaced assertion that
	  time increments between successive gettimeofday calls, which isn't
	  necessarily true, by absolute value of delta.

2005-04-27    <mschimek@users.sf.net>

	* test/caption.c, test/osc.c: vbi_printable() undefined.
	* test/osc.c (decode_vps): s/vbi_bit_reverse[]/vbi_rev8(). 
	(decode_ttx): s/vbi_hamm16()/vbi_unham16p().
	* configure.in: Bumped version number to 0.2.16. HAVE_X
	  conditional was backwards, didn't compile test/osc and
	  test/caption.

2005-03-28    <mschimek@users.sf.net>

	* Release 0.2.15.

2005-03-28    <mschimek@users.sf.net>

	* src/raw_decoder.c (_vbi_sampling_par_verify): Disabled a YUV420
	  even bytes per line check because it conflicts with the ivtv driver,
	  which returns an odd number of bytes per line using _GREY format,
	  mapped to YUV420 because libzvbi 0.2 has no VBI_PIXFMT_Y8.
	* configure.in: Bumped version number to 0.2.15, .so version to 6:1:6.

2005-02-28    <mschimek@users.sf.net>

	* Release 0.2.14.

2005-02-25    <mschimek@users.sf.net>

	* src/cache.c (destroy_list): Suppress unused parameter warning.
	* src/Makefile.am (libzvbi_la_SOURCES): Added pfc_demux.c, pfc_demux.h.
	(LIBZVBI_HDRS): Added pfc_demux.h.
	* doc/Doxyfile: Is a built file, removed from CVS.
	* configure.in: Bumped version number to 0.2.14.

2005-02-20    <mschimek@users.sf.net>

	* test/decode.c: Enabled pfc code.
	* src/packet.c, src/vbi.h: page_clear code replaced by
	  _vbi_pfc_demux. Disabled until rewrite and test.
	* src/event.h: struct pfc_block obsolete, removed.
	* src/idl_demux.c, src/idl_demux.h: New Teletext page
	  format clear demultiplexer from branch 0.3.

2005-02-17    <mschimek@users.sf.net>

	* src: Regrouped doxumentation.
	* test/decode.c: New low level VBI decoder from branch 0.3.
	  Commented out future stuff, made a few corrections and
	  added vbi_idl_demux routines.
	* test/README: Added decode blurb.
	* test/Makefile.am (noinst_PROGRAMS): Added decode.
	* src/idl_demux.c, src/idl_demux.h: New Teletext packet IDL
	  demultiplexer.
	* src/Makefile.am (libzvbi_la_SOURCES): Added idl_demux.c,
	  idl_demux.h.
	(LIBZVBI_HDRS): Added idl_demux.h.
	* doc/Doxyfile.in (FILE_PATTERNS): Added idl_demux.h.

2005-01-23    <mschimek@users.sf.net>

	* Release 0.2.13.

2005-01-22    <mschimek@users.sf.net>

	* src/io.h: read return type ought to be int, not bool.
	* src/io-bktr.c (bktr_read): Const pointer parameter fix.
	* src/io-bktr.c (vbi_capture_bktr_new): Ignored scanning parameter,
	  always assuming 625.
	* src/dvb_demux.c (demux_samples): Potential deref of uninitialized
	  vbi_sliced pointer.
	* src/decoder.c (vbi_raw_decoder_resize), src/caption.c
	(xds_separator, itv_separator): Signedness fix.
	* m4/autogen.sh: Made required versions changeable for tests.
	* src/Makefile.am (INCLUDES), daemon/Makefile.am (INCLUDES),
	  contrib/Makefile.am (INCLUDES), test/Makefile.am (INCLUDES):
	  Removed warning options, they belong into CFLAGS.
	* test/Makefile.am (INCLUDES): Removed unused COMMON_INCLUDES.
	* src/Makefile.am (INCLUDE): Removed unused X_CFLAGS.
	* src/hamm.h (vbi_unham8): Must return signed int.

2005-01-20    <mschimek@users.sf.net>

	* src/hamm.c, src/hamm.h: Dox "since" missing.
	* src/proxy-client.c: Dox update.
	* src/io-dvb.c: Changed to new version.
	* configure.in: Replaced uname call by AC_CANONICAL_HOST for
	  proper cross-compiling.
	* test/wss.c: Compile only if we ENABLE_V4L2.

2005-01-19    <mschimek@users.sf.net>

	* src/lang.c: s/is(blank|full)/is_yadda due to gcc 4.0 built-in name
	  conflict.
	* daemon, src, test, contrib: gcc 4.0 char pointer signedness
	  warnings.

2005-01-18    <mschimek@users.sf.net>

	* Release 0.2.12.

2005-01-17    <mschimek@users.sf.net>

	* po/fr.po: Updated by Christian Marillat.
	* src/hamm.c, src/hamm.h: Updated from branch 0.3, parity and
	  Hamming routines are public now.
	* src/Makefile.am (LIBZVBI_HDRS): Added hamm.h. Added built
	  sources to cleanfiles.
	* test/Makefile.am: Cleaned up. Added hamm check.
	* test/hamm.c: New parity and Hamming routines check, ported
	  over from branch 0.3.

2005-01-15    <mschimek@users.sf.net>

	* test/wss.c: New test/demo capturing a WSS signal from video images.
	* test/README: Added wss.
	* test/Makefile.am (noinst_PROGRAMS): Added wss.
	* src/teletext.c (enhance), src/packet.c (parse_28_29),
	  src/exp-gfx.c (png_export): Nested func fix for gcc 4.0,
	  Debian bug #290444.
	
2005-01-13    <mschimek@users.sf.net>

	* src/raw_decoder.c: VBI_SLICED_TELETEXT_B_L10_625 had incorrect F2
	  range 319-334, bug compatible with bttv. Corrected to 320-335.
	* src/io-v4l2k.c: Added bug workaround for bttv < 0.9.15, saa7134
	  which capture PAL/SECAM F2 line numbers one higher than reported.
	* src/raw_decoder.h, src/raw_decoder.c: s/uint/int strict for
	  compatibility with ancient libzvbi 0.2 apps.

2005-01-09    <mschimek@users.sf.net>

	* test/capture.c, test/osc.c: Changed strict param from -1 to 0
	  for proper WSS reception (requires programming of sampling params).

2004-12-31    <mschimek@users.sf.net>

	* Release 0.2.11

2004-12-31    <mschimek@users.sf.net>

	* src/Makefile.am (libzvbi_la_SOURCES): Added dvb_demux.h.

2004-12-30    <mschimek@users.sf.net>

	* Release 0.2.10

2004-12-28    <mschimek@users.sf.net>

	* src/Makefile.am (LIBZVBI_HDRS): Added dvb_demux.h.
	* src/dvb_demux.c, src/dvb_demux.h: Renamed a few funcs, added
	  missing vbi_dvb_demux_reset(), added documentation, made the
	  interface public.
	* doc/Doxyfile.in (FILE_PATTERNS): Added dvb_demux.h.
	
2004-12-23    <mschimek@users.sf.net>

	* src/io-bktr.c, src/io-dvb.c, src/io-v4l.c, src/io-v4l2.c,
	  src/io-v4l2k.c: errorstr fix, 0.2.9 may crash if NULL.
	* configure.in: Replaced uname call by AC_CANONICAL_HOST for
	  proper cross-compiling. Added HAVE_X conditional.
	* test/Makefile.am: Compile X programs only if we HAVE_X.
	* src/structpr.pl: fourcc fix.
	* src/proxy-msg.c, daemon/proxyd.c: printf ptrdiff_t fixes.

2004-12-12    <mschimek@users.sf.net>

	* src/raw_decoder.c (decode_pattern): Disabled blank line
	  detection. Will be slower now but if the signal inserter is
	  disabled during silent periods for more than 4-5 seconds we may
	  miss caption/subtitles.
	* src/vbi.c (vbi_event_handler_add, vbi_event_handler_remove):
	  Improved doxumentation.
	* src/cache.c (vbi_is_cached, vbi_cache_hi_subno): Undoxumented
	  return value.
	* src/io-v4l2.c: Removed unnecessary includes.
	* src/io-bktr.c (vbi_capture_bktr_new), src/io-v4l.c (v4l_new),
	  src/io-v4l2k.c (vbi_capture_v4l2k_new): Did not initialize
	  raw_decoder, that worked only by accident.
	* src/io-bktr.c (bktr_delete): Did not destroy raw_decoder.
	* src/decoder.h: Added vbi_pixfmt_set macros for raw_decoder test.
	* test/Makefile.am: Added raw_decoder check. Compile cpptest only
	  for make check.
	* test/raw_decoder.c: New raw_decoder.c, bit_slicer.c unit test from
	  branch 0.3, modified to compile here.
	* src/exp-gfx.c (vbi_draw_cc_page_region):  Dox completed.
	* src/exp-txt.c (vbi_print_page_region): Fixed doxumentation of ltr
	  parameter.
	* src/io-v4l.c (vbi_capture_v4l_sidecar_new): Dox completed.

2004-12-11    <mschimek@users.sf.net>

	* test/osc.c: vbi_service_table definitions removed, now
	  semi-public in raw_decoder.h.
	* src/decoder.c (vbi_raw_decode): No longer YUV420-only. 
	* src/decoder.c: Raw VBI decoder routines changed to wrappers of
	  new raw_decoder.c, bit_slicer.c. Old bit slicer remains because
	  it lacks a destroy function.
	* src/sliced.h (VBI_SLICED_): Added new services and updated dox
	  from branch 0.3.
	* src/Makefile.am (libzvbi_la_SOURCES): Added bit_slicer.c|h,
	  raw_decoder.c|h, io-sim.c|h.
	* src/bit_slicer.h, src/bit_slicer.c: New bit slicer from
	  branch 0.3, modified to compile here.
	* src/raw_decoder.h, src/raw_decoder.c: New raw VBI decoder from
	  branch 0.3, modified to compile here.

2004-11-26    <mschimek@users.sf.net>

	* src/misc.h (CONST_PARENT): Added.
	* src/proxy-client.c (vbi_proxy_client_read),
	  src/io-v4l2k.c (v4l2_stream), src/io-v4l.c (v4l_read),
	  src/io-dvb.c (dvb_read), src/io.h: Internal vbi_capture->read()
	  takes const *timeout.
	* src/io-dvb.c:
	(vbi_capture_dvb_filter): perror only if dvb->debug.
	(vbi_capture_dvb_new, vbi_capture_dvb_filter): Doxified.
	(vbi_capture_dvb_new2): Replacement for buggy vbi_capture_dvb_new.
	  Removed useless scanning, services, strict parameter, added pid.
	(vbi_capture_dvb_last_pts): Added to pass out decoded PTS until we
	  have stream_time in the I/O interface.
	(dvb_read): Handle EINTR, EAGAIN. Skip select() if timeout is zero
	  for efficiency.

2004-11-25    <mschimek@users.sf.net>

	* src/io-dvb.c (dvb_read): Must subtract time waited in select
	  from timeout.

2004-11-11    <mschimek@users.sf.net>

	* Release 0.2.9

2004-11-10    <mschimek@users.sf.net>

	* README, NEWS, TODO, daemon/README: Updated for 0.2.9.
	* src/io-dvb.c: New version with vbi_dvb_demux still untested,
	  restored previous version for 0.2.9.
	* configure.in: By default no proxy on FreeBSD.
	* src/io-bktr.c: Include fix.
	* src/Makefile.am: Always compile proxy-client.c.
	* src/proxy-client.c: Moved function documentation down to #ifndef
	  proxy section, or doxygen won't find it. Added missing dummy
	  functions to make the linker happy.
	(vbi_capture_proxy_new): in no-proxy section, fixed parameter
	  mismatch with header.

2004-11-07    <mschimek@users.sf.net>

	* daemon/proxyd.c (dprintf): s/proxyd/zvbid.
	* src/decoder.c: Include site_def.h.
	* src/io-v4l.c (v4l_update_services): bttv has_select fix.
	  Workaround for bttv 0.9.5 VIDIOCGVBIFMT not initializing flags.
	  VIDIOCGVBIFMT scanning guess fix.

2004-11-03    <mschimek@users.sf.net>

	* src/dvb_mux.c (_vbi_dvb_multiplex_sliced,
	  _vbi_dvb_multiplex_samples), src/dvb_demux.c (demux_data_units):
	  D'oh! Got stuffing wrong.
	* src/dvb_mux.c (_vbi_dvb_multiplex_sliced),
	  src/dvb_demux.c (demux_data_units): Don't reverse VPS bits.
	* src/dvb_demux.c: Improved data unit loop to handle field packets.
	* src/io-dvb.c: Ported to new vbi_dvb_demux, untested.
	* po/de.po, po/fr.po, po/es.po, po/nl.po, po/pl.po, po/sv.po:
	  Converted to UTF-8.

2004-10-31    <mschimek@users.sf.net>

	* src/chains.c: Compile only for V4L/V4L2.
	* configure.in: Added FreeBSD ioctl request type.
	* src/proxy-client.c (proxy_client_check_msg): s/EPROTO/EMSGSIZE
	  for FreeBSD.
	  (proxy_client_wait_select): FreeBSD FD_ISSET return type mismatch.

2004-10-27    <mschimek@users.sf.net>

	* src/dvb_mux.c (_vbi_dvb_mux_delete): NULL and CLEAR fix.
	(_vbi_dvb_mux_pes_new): Fixed data_identifier position.
	* src/dvb_mux.c, src/dvb_mux.h: Added, experimental.
	* test/capture.c: Changed PTS source to timestamps.
	* test/export.c: Extended to consume DVB streams.
	
2004-10-25    <mschimek@users.sf.net>

	* po/POTFILES.in: Added proxy-client.c, proxy-msg.c.
	* src/proxy-client.c, src/proxy-msg.c: Massaged error messages.
	* daemon/Makefile.am: Added zvbi-chains target.
	* src/Makefile.am: Added libzvbi-chains target.
	* daemon/chains.c, src/chains.c: Added from proxy-18.bak.
	* daemon/chains.c (main): Replaced sprintf by asprintf and fixed
	  p_env3.
	* configure.in: Added ioctl request type check for chains.
	* test/README: DVB capture update.
	* test/capture.c: Extended to create DVB streams.
	* src/Makefile.am (libzvbi_la_SOURCES): Added dvb.h, dvb_mux.c,
	  dvb_mux.h.
	* src/dvb.h: New definitions for DVB-VBI mux/demux.
	* src/dvb_mux.c, src/dvb_mux.h: Added, experimental.
	* src/sliced.h: Added vbi_service_set.
	* configure.in: Added strndup, strlcpy, asprintf checks.
	* src/misc.h: Added strndup() and asprintf() fallback macros.
	* src/Makefile.am (libzvbi_la_SOURCES): Added misc.c.
	* src/vbi.c, src/vbi.h (vbi_asprintf), src/misc.c (_vbi_asprintf):
	  Moved asprintf() replacement to misc.c and improved the
	  implementation.

2004-10-24    <tomzo@users.sf.net>

	* daemon/proxyd.c: Added handling of norm changes;
	  improved debug level handling.
	* src/proxy-msg.c: Cleaned up socket I/O interface functions.
	* src/proxy-client.c: Added handling of norm changes.
	* text/proxy-test.c: Added test support for norm change handling.

2004-10-14    <mschimek@users.sf.net>

	* src/wstfont2.xbm: Fixed height of Omega character.
	* src/packet.c (vbi_teletext_set_default_region): Override
	  only primary character set code.
	* src/teletext.c (vbi_format_vt_page): Fixed ESC decoding.

2004-10-05    <mschimek@users.sf.net>

	* src/intl-priv.h: Added from 0.3 branch.
	* src/io-v4l2.c: V4L2 0.20 API still recognized for debugging
	  but no longer supported. 
	* src/io-v4l.c, src/io-v4l2.c, src/io-bktr.c: Added ioctl logging.
	* src/io-v4l2k.c: Log mmap and munmap calls.
	* src/io.c, src/io.h: Added mmap, munmap log wrappers.

2004-10-04    <mschimek@users.sf.net>

	* m4/autogen.sh: Updated to recognize newer automake.
	* Makefile.am: Added zvbi-0.2.pc.
	* zvbi-0.2.pc.in: Added.
	* configure.in: Restored proxy switch and output files. Added
	  zvbi-0.2.pc output. Removed duplicate -lm in PNG_LIB.
	* src/io-v4l.c, src/io-v4l2k.c, src/io.c, src/io.h, src/decoder.c:
	  Merged with proxy-18.bak.
	* daemon/Makefile.am, daemon/zvbid.init.in: Added from proxy
	  branch and updated.
	* daemon/proxyd.c, daemon/README, daemon/zvbid.1, test/proxy-test.c,
	  src/proxy-client.c, src/proxy-client.h, src/proxy-msg.c,
	  src/proxy-msg.h: Added from proxy-18.bak. Tweaked cvs Log
	  keyword to preserve Tom's comments.
	* test/Makefile.am: Restored proxy targets.
	* src/Makefile.am: Merged with proxy-18.bak.

2004-06-12    <mschimek@users.sf.net>

	* test/README: Updated capture and osc tool documentation.
	* test/capture.c, test/osc.c: Added options to force use of
	  a particular capture interface and to ignore read errors.
	  Changed verbosity option from boolean to multi-level to
	  enable ioctl logging.
	* src/io-v4l2k.c: Replaced by version from proxy
	  branch (proxy-17.bak). s/signed char/int - only text is char.
	  Interface extensions disabled for now. Added ioctl logging.
	  Added preliminary hack to force read capture for tests.
	* src/io-bktr.c (vbi_capture_bktr_new): No more warning about
	  unused rcsid.
	* src/io.c, src/io.h: Added vbi_capture_io_select and
	  vbi_capture_io_update_timeout from proxy branch, ioctl logging
	  from 0.3 branch.
	* src/Makefile.am: Added ioctl logging.
	* configure.in: Bumped version number.

2004-05-12    <mschimek@users.sf.net>

	* m4/autogen.sh: Fixed non-Posix-ness of head args,
	  reported by St¬ÅÈphane Loeuillet.

2004-05-12    <mschimek@users.sf.net>

	* Release 0.2.8
	
2004-04-25    <mschimek@users.sf.net>

	* src/tables.c: Updated CNI table, with Arte/La Cinqui¬ÅËme
	  fix by St¬ÅÈphane Loeuillet.

2004-04-09    <mschimek@users.sf.net>

	* Release 0.2.7.

2004-04-09    <mschimek@users.sf.net>

	* src/io-v4l2k.c: Incomplete v4l2_buffer initialization, doesn't
	  work with bttv driver 0.9.12.

2004-04-04    <mschimek@users.sf.net>

	* Release 0.2.6.

2004-02-19    <mschimek@users.sf.net>

	* test/capture.c: Don't assert raw vbi data from DVB.

2004-02-18    <mschimek@users.sf.net>

	* src/teletext.c: Fixes in debug code, bug item #893713.
	* src/Makefile.am: New file io-dvb.c.
	* src/io-dvb.c: New device interface contributed by Gerd Knorr.
	* src/dvb: DVB headers from Linux 2.6.1.
	* test/capture.c: Added PID option and DVB interface.

2004-01-02    <mschimek@users.sf.net>

	* src/test/osc.c: Added patch by James Mastros.

2003-12-03    <mschimek@users.sf.net>

	* src/teletext.c (top_navigation_bar): Segv if vtp->pgno == 0x899. 

2003-11-13    <mschimek@users.sf.net>

	* src: New misc.h from 0.3 branch.

2003-10-30	<mschimek@users.sf.net>

	* autogen.sh, m4/autogen.sh: Updated.

2003-10-21	<mschimek@users.sf.net>

	* Release 0.2.5.

2003-10-20	<mschimek@users.sf.net>

	* configure.in, Makefile.am, src/Makefile.am, daemon:
	  Proxy code is not ready for release, moved to a separate
	  branch.
	* src/io-v4l2.c: No workee. Restored 0.2.4 i/o code.
	* src/caption.c, src/teletext.c, src/vbi.c,
	  src/io-bktr.c: FreeBSD 5 compile fixes.
	* Cleanup.

2003-10-16	<mschimek@users.sf.net>

	* src/bcd.h (vbi_dec2bcd, vbi_bcd2dec, vbi_add_bcd,
	  vbi_is_bcd): Corrected documentation. 

2003-10-14      <mschimek@users.sf.net>

	* src/packet.c, src/trigger.c: Fixed unsafe use of strncpy.
	* daemon/zvbid.init.in: Added. Just an example for
	  packagers, I cannot create an init script for each distro
	  out there.
	* daemon/Makefile.am: Changed target ./proxyd to
	  @sbindir@/zvbid. 'proxyd' was a bit too general. 

2003-10-09      <mschimek@users.sf.net>

	* src/exp-txt.c, src/io-v4l2.c, src/io-v4l2k.c:
	  x86-64 fixes by Gwenole Beauchesne, submitted by
	  Thierry Vignaud of MandrakeSoft.

2003-06-07      <tomzo@users.sf.net>

        Periodic check-in for ongoing proxy implementation:
        * src/proxy-msg.c: Optimized client/server message I/O via socket.
        * daemon/proxyd.c: Added command line option -kill; Added devfs
          support (use /dev/v4l/vbi as default device if it exists.)
        Note: Changes in protocol require re-compilation of proxy clients.

2003-06-01      <tomzo@users.sf.net>

        Periodic check-in for ongoing proxy implementation:
        * src/io-proxy.c: Redesigned internal message handling, i.e. switched
          from an event-driven model to a synchronous, RPC-like model. Also
          added TV channel change RPC.
        * daemon/proxyd.c: Started implementation of server-side TV channel
          switching (still incomplete: switching works, but scheduling and
          notifications are missing.)
        * src/io-v4l.c, io-v4l2k.c, io.c, io.h: Implemented TV channel switch.
        * io-v4l2k.c: Added optional support for preliminary ioctl S_CHNPRIO
          (with #ifdef USE_V4L2K_CHNPRIO)
        * test/proxy-test.c: Added tests for TV channel switching: new command
          line options -channel, -freq, -chnprio

2003-05-24      <tomzo@users.sf.net>

        Periodic check-in for ongoing proxy implementation:
        * daemon/proxyd.c: allow multiple -dev arguments on the command line
          and serve all the given devices through multiple sockets in /tmp;
          added support for v4l drivers without select() by using threads to
          block in read(); handle SERVICE_REQ messages from proxy clients to
          support add_service() capture interface in io-proxy.c
        * src/io-proxy.c: Implemented new capture interfaces: add_services()
          and added get_poll_fd(), prepared flush()
        * src/io.c, src/io-v4l.c, io-v4l2.c, io-v4l2k.c: Added v4l_get_poll_fd()
          to return file handle only if driver supports poll() and select()
        * test/proxy-test.c: Added dynamic service switch to test add_service()
          interface: new function; added new service closed caption.

2003-05-17      <tomzo@users.sf.net>

        * src/io.c: Added new interface function vbi_capture_add_services();
          also prepared for new interface function vbi_capture_flush()
        * src/io-v4l.c, io-v4l2.c, io-v4l2k.c: Implemented new interface
          add_services(): add one or more services to an already initialized
          capture context; large internal changes, but existing interface
          functions should remain fully backwards compatible; also prepared
          for new interface function flush()
	* src/decoder.c: added new interface functions, required by io.c's
          new add_services(): vbi_raw_decoder_resize() to adapt for VBI
          geometry changes and vbi_raw_decoder_check_services() to check
          which of the given services can be decoded with current parameters
        * daemon/proxyd.c: uses new IO API function vbi_capture_add_services()

2003-05-10      <tomzo@users.sf.net>

        * daemon/proxyd.c: bugfix: busy loop until the first client connect
          unless -nodetach option was used; also added copying of group and
          permissions from VBI device onto named socket path
        * daemon/README: added TODO list
        * src/io-proxy.c: bugfix proxy_read(): loop around select() until a
          complete VBI frame is received or timeout expired; before the
          function returned 0 when only a partial message was received,
          falsely indicating a timeout to the caller

2003-05-04	<mschimek@users.sf.net>

	* src/caption.c (vbi_decode_caption):
	  s/pthread_mutex_unlock/pthread_mutex_lock.

2003-05-03      <tomzo@users.sf.net>

        * src/proxy-msg.c: follow synlinks in given device paths to allow
          both /dev/vbi and /dev/vbi0 to work as proxy device args
        * test/proxy-test.c: use vbi_capture_pull_sliced() instead of
          vbi_capture_read_sliced()
        * src/io.h: added declaration of vbi_capture_proxy_new() for
          inclusion in libzvbi.h

2003-05-02	<mschimek@users.sf.net>

	* src/io-v4l2k.c: Missed one of Tom's fixes.
	* src/io-v4l2.c: Ported io-v4l2k.c fixes.

2003-04-26	<mschimek@users.sf.net>

	Added proxy daemon by Tom Zoerner:
	* test/Makefile.am: Added proxy-test target.
	* test: Added proxy-test.c
	* src/Makefile.am: Added proxy targets.
	* src: Added io-proxy.c, proxy-msg.c, proxy-msg.h.
	* Added daemon dir (since we need a different Makefile.am),
	  added Makefile.am, proxyd.c, README.
	* Makefile.am: Added daemon subdir.
	* configure.in: Added --disable-proxy switch and daemon/Makefile.

2003-04-26	<mschimek@users.sf.net>

	* src/decoder.c (vbi_raw_decoder_add_services): There was
	  a bug in the loop across the pattern array which caused
	  heap corruption. Fix by Tom Zoerner. He also added some
	  debug output, for now conditionally compiled in.
	* src/decoder.c (vbi_raw_decoder_remove_services): In the
	  pattern array job indices were not adapted. Fix by Tom.
	* src/io-v4l.c (set_parameters): ioctl(VIDIOCSVBIFMT)
	  result EINVAL led to a FALSE result value and regardless
	  of the "strict" level to an abort. Actually EINVAL must
	  be expected. Fix by Tom.
	* src/io-v4l.c (v4l_new): v->dec.offset default values for
	  scanning == 625 were refused by vbi_raw_decoder_add_services().
	  Changed to be identical to the 525 case. Fix by Tom.
	  See zapping-misc 2003-04-23 for details.

2003-02-17	<mschimek@users.sf.net>

	* src/vbi.c, src/vbi.h: Added vbi_version(). 
	
2003-02-16	<mschimek@users.sf.net>

	* Release 0.2.4.

2003-02-15	<mschimek@users.sf.net>

	* src/io-v4l2k.c: Fixed video standard detection.

2003-02-12	<mschimek@users.sf.net>

	* src/videodev2k.h: Updated.
	* src/Makefile.am: Fixed improper linking of unicode
	  library, not listed in libzvbi.la dependencies.

2003-01-05	<garetxe@users.sf.net>

	* po/it.po: Update by Pino Toscano.
	* po/es.po: Update.

2002-12-14	<mschimek@users.sf.net>

	* src/event.h: Wrong assumption on char signedness.

2002-12-14	<garetxe@users.sf.net>

	* it.po: Italian translation, contributed by Pino Toscano.

2002-11-28	<mschimek@users.sf.net>

	* Release 0.2.3.

2002-11-28	<mschimek@users.sf.net>

	* src/exp-vtx.c: Segv due to excess read of variable size
	  cached page structure. Patch #643211 by Art Pogoda.

2002-10-21	<mschimek@users.sf.net>

	* src: A few char* were not const typed.

2002-10-17	<mschimek@users.sf.net>

	* src/io-v4l2k.c, src/videodev2k.h,
	  src/io.h (vbi_capture_v4l2k_new): Added. V4l2 api revision
	  2002-10 for Linux 2.5 (untested, have to wait for drivers :-).
	* src/io-v4l2.c: Added fallback to v4l2k.c.
	* src/io-bktr.c: Added interface to FreeBSD/OpenBSD/NetBSD
	  bktr driver. Seems to work, more or less (bug or feature?).
	* src/export.c (vbi_ucs2be): Fixed format name UCS-2 (not UCS2).
	* test (getopt_long): Added fallback to getopt for non-GNU
	  systems.
	* configure.in: New *BSD and getopt_long test.

2002-10-15	<mschimek@users.sf.net>

	* src/event.h, src/ure.h: s/stdint.h/inttypes.h/ for BSD.
	* configure.in, src/Makefile.am, test/Makefile.am:
	  -lpthread only on Linux.
	* src/io_v4l.c, src/io_v4l2.c: Did not compile when
	  v4l/v4l2 disabled.

2002-10-11	<mschimek@users.sf.net>

	* src/packet.c, test/capture.c: Wrong assumption on char signedness.
	* src/trigger.c (parse_atvef): Fix in type identification.

2002-10-07	<mschimek@users.sf.net>

	* src/exp-gfx.c (vbi_draw_vt_page_region): Flash fix. Zapping
	  not affected.

2002-10-04	<mschimek@users.sf.net>

	* Release 0.2.2.

2002-10-01	<mschimek@users.sf.net>

	* m4: Removed gtk-doc.m4, no longer needed.
	* Makefile.am: m4 in the dist. Thought it's unnecessary, but what
	  the heck, it's not that much.
	* configure.in, test: Added two checks.

2002-09-28	<mschimek@users.sf.net>

	* po/fr.po: Updated by Christian Marillat.

2002-09-26	<mschimek@users.sf.net>

	* src/export.c, src/export.h, src/io.h, src/teletext.c: gettext()
	  fix, should have been dgettext(). Oops.
	* src/wss.c: Aspect ratio event reported incorrect 16:9 anamorphic
	  aspect 16/9, changed to 3/4.

2002-07-30	<mschimek@users.sf.net>

	* src/cache.c: Fixed buffer overflow (SRTL bug).
	* src/exp-txt.c: Fixed double spaces and double height
	  row bug in vbi_print_page_region().
	* src/lang.c: Prime Hebrew won't fix, they transmit language
	  code 0x00 English. Suggest per page language menu, for now
	  added 0x80 entry in vbi_font_descriptors.
	* Prime CNI won't fix, they registered one but don't transmit.
	  Another candidate for TODO #011.
	* src/decoder.c: Increased MAX_WAYS to fix ./osc --sim --pal
	  identification of CC-625.

2002-07-04	<mschimek@users.sf.net>

	* doc, src: Switched to Doxygen.

2002-06-22	<mschimek@users.sf.net>

	* doc/Makefile.am: Modified to permit building libzvbi in
	  a separate directory.
	* src/Makefile.am: Forgot to escape extern "C".
	* src/export.h: Removed C++ reserved export identifier.

2002-06-17	<mschimek@users.sf.net>

	* m4, po, config.rpath: Added because cannot use autogen.sh
	  gettextize --force since gettext 0.11. The fine hack insists
	  on updating already updated Makefile.am's and configure.in.
	* po/Rules-quot: s/PACKAGE VERSION/... because msgfmt complains.

2002-06-17  gettextize  <bug-gnu-gettext@gnu.org>

	* Makefile.am (SUBDIRS): Add m4.
	(SUBDIRS): Remove intl.
	(ACLOCAL_AMFLAGS): New variable.
	(EXTRA_DIST): Add config.rpath.
	* configure.in (AC_OUTPUT): Add m4/Makefile.

2002-06-14	<mschimek@users.sf.net>

	* doc/zdoc-scan: Fix re zapping-Bugs-568052. 

2002-06-13	<mschimek@users.sf.net>

	* src/export.c: vbi_export_info_keyword() cuts option string off the
	  keyword, a convenience.

2002-06-08	<mschimek@users.sf.net>

	* src/packet.c: #if fix.
	* zvbi.spec.in: Removed libunicode requirement.
	* Release 0.2.1.

2002-05-23	<mschimek@users.sf.net>

	* macros/autogen.sh: Updated.
	* Release 0.2.

2002-05-20	<mschimek@users.sf.net>

	* configure.in: Inherit env CFLAGS.
	* teletext.c: Triggers a GCC 3.1 bug, do export CFLAGS=-V3.0.4

2002-04-28	<mschimek@users.sf.net>

	* src/packet.c, src/vbi.h, src/event.h: Added Page Format - Clear
	  (ETS 300 708) decoder. Future stuff.
	* src/teletext.c: Some work towards PDC preselection.

2002-04-20	<mschimek@users.sf.net>

	* src/vbi.c, src/event.h: New handler functions identifying handler by
	  func ptr and user data.
	* src/ure.c: If possible use glibc 2.1 wchar_t instead of
	  libunicode.

2002-04-18	<mschimek@users.sf.net>

	* src/io.c, src/io.h, src/io-v4l.c, src/io-v4l2.c: Added function
	  to retrieve fd.
	* contrib: Added x11font by Gerd Knorr.
	* configure.in: Added contrib/Makefile.

2002-04-16	<mschimek@users.sf.net>

	* src/caption.c: Corrected string length assertion in xds_decoder.

2002-04-13	<mschimek@users.sf.net>

	* Corrected a few typographical errors in the docs.

2002-04-11	<mschimek@users.sf.net>

	* src/io-v4l2.c: Gerd Knorr says bttv 0.8.x needs O_RDWR to
	  PROT_WRITE. Nyquist check was missing.
	* test/capture.c: Gerd found missing timeval init. Miracle
	  how it worked up to this point remains unsolved.

2002-04-09	<mschimek@users.sf.net>

	* src/caption.c: Added ASCII range check before Unicode txl,
	  re zapping-misc 2002-04-09.

2002-04-01	Release 0.1.1 <mschimek@users.sf.net>

	* po/de.po: Updated.
	* po/es.po: Updated by I? G. Etxebarria.
	* po/pl.po: Updated by Pawel Sakowski.
	* Removed the version number from the library name,
	  was a bad idea.

2002-03-19	Christian Marillat

	* po/fr.po: Updated.

2002-03-19	<mschimek@users.sf.net>

	* src/io-v4l.c: Read loop fix, restored pthread_testcancel();
	  (still needed despite select()?), ETIME not ignored.
	* src/io-v4l2.c: Read loop fix, pthread_testcancel();
	* Changes suggested by gcc 3.0.4.

2002-03-16	<mschimek@users.sf.net>

	* src/Makefile.am: Automated libzvbi.h version #defines.

2002-03-10	zapping-Bugs-527984 <mschimek@users.sf.net>

	* src/io-v4l2.c: Added mmap PROT_READ | PROT_WRITE for
	  bttv 0.8.x.

2002-03-09	Bugfix <mschimek@users.sf.net>

	* src/search.c: Fixed pattern highlighting, used to still
	  skip gfx although now searchable. Segv in reverse search.
	* src/export-txt.c: vbi_print_page_region() return TRUE
	  instead of actual bytes written.

2002-03-02	Misc <mschimek@users.sf.net>

	* src/bcd.h: Extended vbi_add_bcd() and vbi_is_bcd() from
	  3 to 8 digits.
	* src/export.c: strncpy() fix in vbi_export_invalid_option().
	* Dropped the libunicode requirement. Is only needed for
	  ure.c which is needed by search.c. Search is now disabled
	  when unicode is not installed.

2002-02-08	I/O stuff <mschimek@users.sf.net>

	* src/io-v4l.c: Enabled select() for bttv.

2002-01-19	Fixes <mschimek@users.sf.net>

	* src/io.c: vbi_capture_delete() not NULL safe, corrected.
	* src/search.c: Fixed non-regexp mode escape bug.
	* src/ure.c: Added character classes :gfx: and :drcs:.
	* src/exp-gfx.c: Fixed DRCS display.
	* src/exp-txt.c: Fixed color reset (VT100).

2002-01-17	V4L, build fixes <garetxe@users.sf.net>

	* src/io_v4l.c: Added missing pixfmt initialization.
	Works great after that, great job.
	* Makefile.am, configure.in: Some build fixes.

2002-01-14	Restored V4L interface, more test stuff, fixes <mschimek@users.sf.net>

	* src/io_v4l.c: Added, *untested*.
	* test/osc: Try v4l2, then v4l.
	* po: Updated.
	* src/hamm.c: Corrected char types (use char only for
	  text, these are ints).
	* src/export.c: Bugfix in option_string(), didn't
	  accept '-' and '_' in option keywords.
	* test/capture.c: Added, from old vbi_decoder().
	* test/sim.c: Ditto, plus new Teletext simulation.
	* test: Updated, misc small improvements.

2002-01-13	Fixes <mschimek@users.sf.net>

	* test/explist.h: Option type check.
	* doc/tmpl/sliced.sgml: Corrected .gif names.
	* src/export.c: Fixed vbi_export_option_menu_set(), didn't check
	  for entry < 0.

2002-01-12	Imported libzvbi into Zapping CVS <mschimek@users.sf.net>

	* Renamed to libzvbi to avoid a name conflict. VBI is an ubiquitious
	  acronym and there are at least two other libvbi's around.
	* libzvbi.h: Now generated at compile time, so we can keep public
	  and private definitions together, autodocs are filtered out.
	  Added version #defines.
	* Separated bcd.h, event.h, search.h. Removed os.h.
	* Prefixed vbi_ and VBI_ a few remaining symbols, attr_stuff became
	  vbi_stuff and fmt_page vbi_page. Purpose to avoid name conflicts
	  since we're going public.
	* New vbi_char (former attr_char) encodes characters as Unicode
	  to improve interoperability. Translation TTX/CC->Unicode in
	  decoder, Unicode->glyph in export functions. This affects TTX
	  combined glyphs, now only those covered by U+00A0 to U+017F
	  can be decoded and displayed. Future Latin Ext-B?
	* exp_gfx.c: Changed PPM color depth from 4 to 8 bits. PNG export
	  now works with Closed Caption pages.
	* exp_html.c: Teletext G1/G3 substituting and Network name in
	  title doesn't exist anymore, XXX should be restored.
	* exp-txt.c: vbi_print_page replaced the string module used for
	  cut&paste. ANSI/ASCII modules dropped, the new text module
	  supports a larger number of character encodings. Improved color
	  and ANSI/VT100 or VT200 sequences.
	* export.c: Upgraded the api to that used by rte 0.5+, which
	  descended from here, so we have roughly the same everywhere.
	* teletext.c: NLSed TOP index page.
	* tables.c: Stripped the country table to what's actually needed,
	  removed the station short names we never used.
	* cache.c: Added vbi_unref_page().
	* v4lx.c: Completely replaced by a more generic version.
	* Copied libzvbi .po entries from Zapping here.
	* Added /test with various verification utilities.
	* Added gtk-doc and wrote some autodocs.

2001-11-01	Standalone libvbi <mschimek@users.sf.net>

	* Extracted libvbi from Zapping <http://zapping.sf.net>, added
	  Makefiles and stuff.

Local Variables:
mode: change-log
coding: utf-8
left-margin: 8
fill-column: 76
End:
